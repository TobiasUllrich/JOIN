<!DOCTYPE html>
<html lang="en">

<head>
    <!-- KOPFBEREICH STANDARD-->


    <meta charset='UTF-8'> <!-- UTF-8 ist Standard, Alternativen: "ASCII" oder "ISO-8859-15" -->
    <meta http-equiv="X-UA-Compatible" content='IE=edge'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Sorgt für Barrierefreiheit -->

    <title>JOIN</title>
    <!--See Trello, Jira or kanbanflow-->
    <!--ToDos, In Progress, Backlog, Testing-->
    <!--Help-Sektion: Beschreibung wie es geht-->
    <!--Impressum & Datenschutz unten links in grau-->
    <!--Daten sollen auf Server mit smallest-backend-ever gespeichert werden-->
    <!--Learnings von Kochwelt-->

    <!-- Bootstrap CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <!-- Bootstrap CSS only -->

    <link href="img/logo.png" type="image/x-icon" rel="icon" /> <!-- Bindet FavIcon ein-->

    <!-- Fonts downloaden in entsprechenden Ordner legen und über Extra-CSS-Datei einbinden (https://google-webfonts-helper.herokuapp.com/) -->
    <link rel="stylesheet" type='text/css' media='screen' href="fonts.css">
    <script src="script.js"></script> <!-- Statt <script> ... </script> -->
    <link rel="stylesheet" type='text/css' media='screen' href="style.css"> <!-- Statt <style> ... </style> -->
    <link rel="stylesheet" href="board.css">

    <!-- JavaScript Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
        crossorigin="anonymous"></script>
    <!-- JavaScript Bootstrap -->

    <script src="mini_backend.js"></script> <!-- Zuerst einbinden, weil Funktion setURL verfügbar sein muss -->
    <script>
        // https://github.com/JunusErgin/smallest_backend_ever
        // Funktion setURL() ändert die Variable BASE_SERVER_URL auf den angegebenen Pfad
        // Unter dem angegebenen Pfad muss der Ordner smallest_backend_ever mit allen Dateien von GitHub liegen
        setURL('https://gruppe-2970.developerakademie.net/smallest_backend_ever');

        // WICHTIG ZU INSTALLIEREN SIND DIE FOLGENDEN ZWEI:
        //  FÜR CHROME-ERWEITERUNG: https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf
        //  FÜR LIVE-SERVER: https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer


        async function init() {
            await downloadFromServer();
            users = JSON.parse(backend.getItem('users')) || [];
        }

        // ADD USER TO ARRAY
        async function addUser(name) {
            users.push(name);
            //-> Im Live Array können wir gleich sehen, dass das Element inzugefügt wurde, es wird in der nächsten Zeile noch ins Backend übertragen
            await backend.setItem('users', JSON.stringify(users));
        }

        // DELETE SPECIFIC USER FROM ARRAY
        async function delUser(name) {
            let id = users.indexOf(name);
            console.log(id);
            users.splice(id, 1);
            //-> Im Live Array können wir gleich sehen, dass das Element gelöscht wurde, es wird in der nächsten Zeile noch ins Backend übertragen
            await backend.setItem('users', JSON.stringify(users));
        }

        // DELETE ALL USERS FROM ARRAY
        async function deleteAllUsers() {
            await backend.deleteItem('users');
            //-> Wenn jetzt nach dem Deleten ein init() ausgeführt wird, dann sieht man, dass das Array leer ist
        }
    </script>



    <script src="board.js"></script> <!-- Statt <script> ... </script> -->
    <script src="backlog.js"></script> <!-- Statt <script> ... </script> -->
    <script src="addTask.js"></script> <!-- Statt <script> ... </script> -->


    <!-- KOPFBEREICH STANDARD-->
</head>


<!--Sobald der body-Bereich geladen wurde, wird das Java-Script ausgeführt-->

<body onload="includeHTML();init();">


    <!-- Header einbinden -->
    <div w3-include-html="templates/header.html"></div>
    <!-- Header einbinden -->

    <!-- MAIN -->
    <div class="main-page-container">
        <div class="main-board-content">
            <div id="todo" class="solo-category">
                <h2>TO DO</h2>
                <div class="category-inputfield">
                    <div id="main-task" class="main-task border-left-red" onclick="showTaskDetails()">
                        <!--CODE AB HIER BIS ZEILE 137 ist ein Template aus board.js Funktion templateOfNewTask // Es ist nur vorübergehend hier damit ich schonmal stylen kann-->
                        <div class="task-headline">
                            <div><img class="task-image" src="./img/todo.png"></div>
                            <!--Es gibt für jede Kategorie ein Bild todo.png / inprogress.png / testing.png / done.png-->
                            <div class="task-titel">
                                <h3>TASKTITLE</h3>
                                <span>TASKDATE</span>
                            </div>
                            <div class="delete-btn"><img class="delete-img" title="Delete Task" src="./img/delete.png">
                            </div>
                        </div>

                        <div id="task-details" class="task-details d-none">
                            <table>
                                <tr>
                                    <td><b>Description:</b></td>
                                    <td>TASKDESCRIPTION</td>
                                </tr>

                                <tr>
                                    <td><b>Category:</b></td>
                                    <td>TASKCATEGORY</td>
                                </tr>

                                <tr>
                                    <td><b>Urgency:</b></td>
                                    <td>TASKURGENCY</td>
                                </tr>

                                <tr>
                                    <td><b>Assigned to:</b></td>
                                    <td>USER</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div id="progress" class="solo-category">
                <h2>IN PROGRESS</h2>
                <div class="category-inputfield"></div>
            </div>

            <div id="testing" class="solo-category">
                <h2>TESTING</h2>
                <div class="category-inputfield"></div>
            </div>

            <div id="done" class="solo-category">
                <h2>DONE</h2>
                <div class="category-inputfield"></div>
            </div>
        </div>
    </div>

    <!-- MAIN -->


    <!-- Footer einbinden -->
    <div w3-include-html="templates/footer.html"></div>
    <!-- Footer einbinden -->


</body>



</html>